---
path: /sdk/features/user-context-config
title: User and context configuration
description: This topic explains how to configure user and context objects in LaunchDarkly SDKs. These features are available for both client-side and server-side SDKs.
published: true
tags: ['configure', 'context', 'built-in', 'custom', 'attribute', 'sdk', 'user', 'lduser']
---

## Overview

This topic explains how to configure user and context objects in LaunchDarkly SDKs. These features are available for both client-side and server-side SDKs.

<Callout intent="info">
<CalloutTitle>Newer versions of LaunchDarkly SDKs replace users with contexts</CalloutTitle>
<CalloutDescription>

A context is a generalized way of referring to the people, services, machines, or other resources that encounter feature flags in your product. Contexts replace another data object in LaunchDarkly: "users." To learn more, read [Contexts and segments](/home/contexts).

Creating contexts and evaluating flags based on them is supported in the latest major versions of [most of our SDKs](/sdk). For these SDKs, the code samples on this page include the two most recent versions.

</CalloutDescription>
</Callout>

## Configuring context objects

Every LaunchDarkly SDK lets you configure context or user objects to return specific data to LaunchDarkly. Any attributes you pass to LaunchDarkly become available on the **Contexts** list. The attribute values determine which variation of a feature flag the customer receives.

Every object is required to have a `key`. Keys are always transmitted to LaunchDarkly. Typically, you supply the key when you create the context. If you are using a client-side SDK and mark the context as anonymous, the SDK can generate the key for you. To learn more, read [Anonymous contexts and users](/sdk/features/anonymous).

Keys must be a string type. Keys must be unique, deterministic, and should not contain Personally Identifiable Information (PII). Keys must be consistent, which means the same person must correspond to the same key across different services to contribute to consistent flag evaluations and accurate monthly context instances (MCI). You can use a primary key or a hash, as long as the same person always has the same key. We recommend using a hash if possible.

### Using built-in and custom attributes

Attributes other than the key are optional. There are two types of attributes: built-in attributes, which are LaunchDarkly names, and custom attributes, which you can name anything you choose.

When you work with an SDK that supports contexts, the only built-in attributes are `kind`, `key`, `name`, and `anonymous`.

You can define additional attributes for a context by passing in a name and value for each. These additional attributes let you add targeting rules for your flags based on any data that you want to send to LaunchDarkly. Attribute values can be any JSON type, including boolean, number, string, array, or object. To learn more, read [Context attributes](/home/contexts/attributes).

<Callout intent="alert">
<CalloutTitle>Custom and built-in attributes cannot share names</CalloutTitle>
<CalloutDescription>

If you create an attribute with a name already in use by a built-in attribute, the SDK will behave unpredictably during feature flag evaluation.

When you work with an SDK that supports contexts, the only built-in attributes are `kind`, `key`, `name`, and `anonymous`. If you work with an SDK that only supports users, there are several additional built-in attributes.

</CalloutDescription>
</Callout>

To learn how to configure private attributes in your SDK, read [Private attributes](/sdk/features/private-attributes).

Details about each SDK's configuration are available in the SDK-specific sections below.

* [Client-side SDKs](#client-side-sdks)
* [Server-side SDKs](#server-side-sdks)

## Client-side SDKs

Here are the configuration options for context and user entities in client-side SDKs.

* [.NET (client-side)](#net-client-side)
* [Android](#android)
* [C/C++ (client-side)](#cc-client-side)
* [Electron](#electron)
* [Flutter](#flutter)
* [iOS](#ios)
* [JavaScript](#javascript)
* [Node.js (client-side)](#nodejs-client-side)
* [React Native](#react-native)
* [React Web](#javascript): The React SDK relies on the JavaScript SDK for context-related functionality.
* [Roku](#roku)

### .NET (client-side)

<Details summary="Expand .NET (client-side) code sample">

In the client-side .NET SDK, you can construct a simple `Context`, with a context kind of "user," that only has a key by calling `Context.New`. Alternatively, you can use `Context.Builder`, which allows setting all properties.

Here's an example:

<CodeSample>
<CSTab label=".NET SDK v3.0 (C#)">

```csharp
Context context = Context.Builder("context-key-123abc")
    .Set("firstName", "Sandy")
    .Set("lastName", "Smith")
    .Set("email", "sandy@example.com")
    .Set("group", "microsoft")
    .Build();
```

</CSTab>
<CSTab label=".NET SDK v2.x (C#)">

```csharp
LDUser user = User.Builder("user-key-123abc")
    .FirstName("Sandy")
    .LastName("Smith")
    .Email("sandy@example.com")
    .Custom("group", "Microsoft")
    .Build();
```

</CSTab>
</CodeSample>

The argument to `Builder` is the context's key. The key should uniquely identify each context. You can use a primary key or a hash, as long as the same context always has the same key. We recommend using a hash if possible. In this example, the hash is `"context-key-123abc"`.

<Callout intent="info">
<CalloutTitle>Interpreting custom attribute types</CalloutTitle>
<CalloutDescription>

The optional name and kind attributes, which you can set with `.Name()` and `.Kind()`, expect string values. If the kind attribute is not specified, it is assumed to be "user." Other attribute values can be any JSON type, including booleans, numbers, strings, arrays, or objects. The SDK uses the [`LdValue`](https://launchdarkly.github.io/dotnet-client-sdk/api/LaunchDarkly.Sdk.LdValue.html) type to represent arrays and objects. The client-side .NET SDK is strongly-typed, so be aware of this distinction.

</CalloutDescription>
</Callout>

If an attribute is a JSON object, then in your flag or segment targeting, you can use `/` as a delimiter to refer to specific object fields. For example, if you have an "address" attribute that includes several fields, then you could use `/address/city` in your targeting. To learn more, read [Targeting with flags](/home/flags/targeting).

Here's how to construct a context with a context kind of something other than "user":

<CodeSample>
<CSTab label=".NET SDK v3.0 (C#)">

```csharp
var context = Context.New(ContextKind.Of("organization"), "org-key-123abc");
```
</CSTab>
</CodeSample>

Here's how to construct a multi-context, which includes multiple context kinds:

<CodeSample>
<CSTab label=".NET SDK v3.0 (C#)">

```csharp
var userContext = Context.New("user-key-123abc");

var orgContext = Context.New(ContextKind.Of("organization"), "org-key-123abc");

var multiContext = Context.NewMulti(userContext, orgContext);
```
</CSTab>
</CodeSample>

To learn how to configure private attributes in the .NET (client-side) SDK, read [Private attributes](/sdk/features/private-attributes#net-client-side).

To learn how to configure anonymous contexts in the .NET (client-side) SDK, read [Anonymous contexts and users](/sdk/features/anonymous#net-client-side).
</Details>

### Android

<Details summary="Expand Android code sample">

In the Android SDK, use a [builder pattern](https://en.wikipedia.org/wiki/Builder_pattern) to construct contexts.

Here's an example:

<CodeSample>
<CSTab label="Android SDK v4.0 (Java)">

```java
LDContext context = LDContext.builder("context-key-123abc")
    .set("email", "sandy@example.com")
    .set("firstName", "Sandy")
    .set("lastName", "Smith")
    .set("group", "Microsoft")
    .build();
```

</CSTab>
<CSTab label="Android SDK v4.0 (Kotlin)">

```kotlin
val context: LDContext = LDContext.builder("context-key-123abc")
    .set("email", "sandy@example.com")
    .set("firstName", "Sandy")
    .set("lastName", "Smith")
    .set("group", "Microsoft")
    .build()
```

</CSTab>
<CSTab label="Android SDK v3.x (Java)">

```java
LDUser user = new LDUser.Builder("user-key-123abc")
    .email("sandy@example.com")
    .firstName("Sandy")
    .lastName("Smith")
    .custom("group", "Microsoft")
    .build();
```

</CSTab>
<CSTab label="Android SDK v3.x (Kotlin)">

```kotlin
val user: LDUser = LDUser.Builder("user-key-123abc")
    .email("sandy@example.com")
    .firstName("Sandy")
    .lastName("Smith")
    .custom("group", "Microsoft")
    .build()
```

</CSTab>
</CodeSample>

The argument to `Builder` is the context's key. The key should uniquely identify each context. You can use a primary key or a hash, as long as the same context always has the same key. We recommend using a hash if possible. In this example, the hash is `"context-key-123abc"`.

<Callout intent="info">
<CalloutTitle>Interpreting custom attribute types</CalloutTitle>
<CalloutDescription>

The optional name and kind attributes, which you can set with `.name()` and `.kind()`, expect string values. If the kind attribute is not specified, it is assumed to be "user." Other attribute values can be any JSON type, including boolean, number, string, array, or object. The Android SDK is strongly-typed, so be aware of this distinction.

</CalloutDescription>
</Callout>

If an attribute is a JSON object, then in your flag or segment targeting, you can use `/` as a delimiter to refer to specific object fields. For example, if you have an "address" attribute that includes several fields, then you could use `/address/city` in your targeting. To learn more, read [Targeting with flags](/home/flags/targeting).

Here's how to construct a basic context with a context kind of something other than "user":

<CodeSample>
<CSTab label="Android SDK v4.0">

```java
LDContext context1 = LDContext.create(ContextKind.of("organization"), "org-key-123abc");
```

</CSTab>
</CodeSample>

Here's how to construct a multi-context, which includes multiple context kinds:

<CodeSample>
<CSTab label="Android SDK v4.0">

```java
LDContext multiContext = LDContext.createMulti(
    LDContext.create("user-key-123abc"),
    LDContext.create(ContextKind.of("device"), "device-key-123abc")
);
```

</CSTab>
</CodeSample>

To learn how to configure private attributes in the Android SDK, read [Private attributes](/sdk/features/private-attributes#android).

To learn how to configure anonymous contexts in the Android SDK, read [Anonymous contexts and users](/sdk/features/anonymous#android).
</Details>

### C/C++ (client-side)

<Details summary="Expand C/C++ (client-side) code sample">

In the C/C++ (client-side) SDK, you can construct a user using `LDUserNew`.

Here's an example:

<CodeSample>
<CSTab label="C/C++">

```c
struct LDJSON *attributes, *groups;
groups = LDNewArray();
LDArrayPush(groups, LDNewText("Google"));
LDArrayPush(groups, LDNewText("Microsoft"));
attributes = LDNewObject();
LDObjectSetKey("groups", groups);
struct LDUser *user = LDUserNew("user-key-123abc");
LDUserSetFirstName(user, "Sandy");
LDUserSetLastName(user, "Smith");
LDUserSetCustomAttributesJSON(user, attributes);
```

</CSTab>
</CodeSample>

The argument to `LDUserNew` is the user's key. The key should uniquely identify each user. You can use a primary key, an email address, or a hash, as long as the same user always has the same key. We recommend using a hash if possible. In this example, the hash is `"user-key-123abc"`.

<Callout intent="info">
<CalloutTitle>Interpreting custom attribute types</CalloutTitle>
<CalloutDescription>

Most of the built-in attributes, like names and email addresses, expect string values. Custom attributes values can be booleans, numbers, strings, or arrays. If you enter a custom value on the **Users** list that looks like a number or a boolean, the SDK interprets it that way.

</CalloutDescription>
</Callout>

To learn how to configure private attributes in the C/C++ (client-side) SDK, read [Private attributes](/sdk/features/private-attributes#cc-client-side).

To learn how to configure anonymous users in the C/C++ (client-side) SDK, read [Anonymous contexts and users](/sdk/features/anonymous#cc-client-side).
</Details>

### Electron

<Details summary="Expand Electron code sample">

<Callout intent="alert">
<CalloutTitle>Personally-identifying user keys</CalloutTitle>
<CalloutDescription>

By default, when the SDK requests feature flags from LaunchDarkly, it makes an HTTP GET request with the user properties encoded in the URL. If you do not want user keys or other properties to be in request URLs, enable the `useReport` option in your client configuration. The SDK sends user data in the body of an HTTP REPORT request instead.

</CalloutDescription>
</Callout>

Here's an example of a user:

<CodeSample>
<CSTab label="JavaScript">

```js
const user = {
  key: 'user-key-123abc',
  firstName: 'Sandy',
  lastName: 'Smith',
  email: 'sandy@example.com',
  custom: {
    groups: ['Google', 'Microsoft']
  }
};
```

</CSTab>
<CSTab label="TypeScript">

```ts
import * as LDElectron from 'launchdarkly-electron-client-sdk';

const user: LDElectron.LDUser = {
  key: 'user-key-123abc',
  firstName: 'Sandy',
  lastName: 'Smith',
  email: 'sandy@example.com',
  custom: {
    groups: ['Google', 'Microsoft'],
  },
};
```

</CSTab>
</CodeSample>

The `key` property is the user's key. The key should uniquely identify each user. You can use a primary key or a hash, as long as the same user always has the same key. We recommend using a hash if possible. In this example, the hash is `"user-key-123abc"`.

<Callout intent="info">
<CalloutTitle>Interpreting custom attribute types</CalloutTitle>
<CalloutDescription>

Most of the built-in attributes, like names and email addresses, expect string values. Custom attribute values can be booleans, numbers, strings, or arrays. If you enter a custom value on the **Users** list that looks like a number or a boolean, the SDK interprets it that way.

</CalloutDescription>
</Callout>

To learn how to configure private attributes in the Electron SDK, read [Private attributes](/sdk/features/private-attributes#electron).

To learn how to configure anonymous users in the Electron SDK, read [Anonymous contexts and users](/sdk/features/anonymous#electron).
</Details>

### Flutter

<Details summary="Expand Flutter code sample">

In the Flutter SDK, use a [builder pattern](https://en.wikipedia.org/wiki/Builder_pattern) to construct users.

Here's an example:

<CodeSample>
<CSTab label="Dart">

```dart
LDUser user = LDUserBuilder('user-key-123abc')
    .email('sandy@example.com')
    .firstName('Sandy')
    .lastName('Smith')
    .custom('group', LDValue.ofString('microsoft'))
    .build();
```

</CSTab>
</CodeSample>

The argument to `LDUserBuilder` is the user's key. The key should uniquely identify each user. You can use a primary key or a hash, as long as the same user always has the same key. We recommend using a hash if possible. In this example, the hash is `"user-key-123abc"`.

<Callout intent="info">
<CalloutTitle>Interpreting custom attribute types</CalloutTitle>
<CalloutDescription>

Most of the built-in attributes, like names and email addresses, expect string values. Custom attributes values can be booleans, numbers, strings, or arrays. Custom attribute values in the Flutter SDK use the `LDValue` class to support the various underlying types for the values. If you enter a custom value on the **Users** list that looks like a number or a boolean, the SDK interprets it that way. The Flutter SDK is strongly-typed, so be aware of this distinction.

</CalloutDescription>
</Callout>

To learn how to configure private attributes in the Flutter SDK, read [Private attributes](/sdk/features/private-attributes#flutter).

To learn how to configure anonymous users in the Flutter SDK, read [Anonymous contexts and users](/sdk/features/anonymous#flutter).
</Details>

### iOS

<Details summary="Expand iOS code sample">

You can pass optional properties to the context object in iOS:

<CodeSample>
<CSTab label="iOS SDK v8.0 (Swift)">

```swift
var contextBuilder = LDContextBuilder(key: "context-key-123abc")
contextBuilder.trySetValue("name", .string("Sandy"))
contextBuilder.trySetValue("email", .string("sandy@example.com"))

let context = try contextBuilder.build().get()
```

</CSTab>
<CSTab label="iOS SDK v8.0 (Objective-C)">

```objectivec
LDContextBuilder *builder = [[LDContextBuilder alloc] initWithKey:@"context-key-123abc"];
[builder trySetValueWithName:@"name" value:[LDValue ofString:@"Sandy"]];
[builder trySetValueWithName:@"email" value:[LDValue ofString:@"sandy@example.com"]];

LDContext *context = builder.build.success;
```

</CSTab>
<CSTab label="iOS SDK v7.x (Swift)">

```swift
var user = LDUser(key: "user-key-123abc")
user.name = "Sandy"
user.email = "sandy@example.com"
```

</CSTab>
<CSTab label="iOS SDK v7.x (Objective-C)">

```objectivec
LDUser *user = [[LDUser alloc] initWithKey:@"user-key-123abc"];
user.name = @"Sandy";
user.email = @"sandy@example.com";
```

</CSTab>
</CodeSample>

This example sets a key and adds the end user's full name and email address.

The `key` property should uniquely identify each context. You can use a primary key or a hash, as long as the same context always has the same key. We recommend using a hash if possible. In this example, the hash is `"context-key-123abc"`.

You can define additional attributes for a context by passing in a name and value for each. Additional attributes can be any JSON type, including boolean, number, string, array, or object. 

If an attribute is a JSON object, then in your flag or segment targeting, you can use `/` as a delimiter to refer to specific object fields. For example, if you have an "address" attribute that includes several fields, then you could use `/address/city` in your targeting. To learn more, read [Targeting with flags](/home/flags/targeting).

To learn more about the specific context properties that are available in this SDK, read [`LDContextBuilder`](https://launchdarkly.github.io/ios-client-sdk/Structs/LDContextBuilder.html).

Here's how to construct a multi-context, which includes multiple context kinds:

<CodeSample>
<CSTab label="iOS SDK v8.0 (Swift)">

```swift
var userBuilder = LDContextBuilder(key: "user-key-123abc")
var deviceBuilder = LDContextBuilder(key: "device-key-123abc")
deviceBuilder.kind("device")

var multiBuilder = LDMultiContextBuilder()
multiBuilder.addContext(try userBuilder.build().get())
multiBuilder.addContext(try deviceBuilder.build().get())

let context = try multiBuilder.build().get()
```

</CSTab>
<CSTab label="iOS SDK v8.0 (Objective-C)">

```objectivec
LDContextBuilder *userBuilder = [[LDContextBuilder alloc] initWithKey:@"USER_CONTEXT_KEY"];
LDContextBuilder *deviceBuilder = [[LDContextBuilder alloc] initWithKey:@"DEVICE_CONTEXT_KEY"];
[deviceBuilder kindWithKind:@"device"];

LDMultiContextBuilder *multiBuilder = [[LDMultiContextBuilder alloc] init];
[multiBuilder addContextWithContext:userBuilder.build.success];
[multiBuilder addContextWithContext:deviceBuilder.build.success];

LDContext *multiContext = multiBuilder.build.success;
```

</CSTab>
</CodeSample>

To learn how to configure private attributes in the iOS SDK, read [Private attributes](/sdk/features/private-attributes#ios).

To learn how to configure anonymous contexts in the iOS SDK, read [Anonymous contexts and users](/sdk/features/anonymous#ios).
</Details>

### JavaScript

<Details summary="Expand JavaScript code sample">

Here's an example of a context:

<CodeSample>
<CSTab label="JavaScript SDK v3.0">

```js
const context = {
  kind: 'user',
  key: 'user-key-123abc',
  firstName: 'Sandy',
  lastName: 'Smith',
  email: 'sandy@example.com',
  groups: ['Google', 'Microsoft']
};
```

</CSTab>
<CSTab label="JavaScript SDK v3.0 (TypeScript)">

```ts
import * as ld from 'launchdarkly-js-client-sdk';

const context: ld.LDContext = {
  kind: 'user',
  key: 'user-key-123abc',
  firstName: 'Sandy',
  lastName: 'Smith',
  email: 'sandy@example.com',
  groups: ['Google', 'Microsoft']
}
```

</CSTab>
<CSTab label="JavaScript SDK v2.x">

```js
const user = {
  key: 'user-key-123abc',
  firstName: 'Sandy',
  lastName: 'Smith',
  email: 'sandy@example.com',
  custom: {
    groups: ['Google', 'Microsoft']
  }
};
```

</CSTab>
<CSTab label="JavaScript SDK v2.x (TypeScript)">

```ts
import * as ld from 'launchdarkly-js-client-sdk';

const user: ld.LDUser = {
  key: 'user-key-123abc',
  firstName: 'Sandy',
  lastName: 'Smith',
  email: 'sandy@example.com',
  custom: {
    groups: ['Google', 'Microsoft'],
  },
}
```

</CSTab>
</CodeSample>

The `key` property should uniquely identify each context. You can use a primary key or a hash, as long as the same context always has the same key. We recommend using a hash if possible. In this example, the hash is `user-key-123abc`.

<Callout intent="info">
<CalloutTitle>Interpreting custom attribute types</CalloutTitle>
<CalloutDescription>

The optional `name` and `kind` attributes expect string values. If the `kind` attribute is not specified, it is assumed to be "user." Other attributes can be booleans, numbers, strings, arrays, or JSON objects.

</CalloutDescription>
</Callout>

If an attribute is a JSON object, then in your flag or segment targeting, you can use `/` as a delimiter to refer to specific object fields. For example, if you have an "address" attribute that includes several fields, then you could use `/address/city` in your targeting. To learn more, read [Targeting with flags](/home/flags/targeting).

<Callout intent="alert">
<CalloutTitle>Personally-identifying context keys</CalloutTitle>
<CalloutDescription>

We recommend against using personally identifiable information (PII) in context keys. If the `key` attribute you rely on in your context JSON does contain PII, you should enable the `useReport` option by sending the evaluation context as a JSON base64 URL-encoded path parameter. When you enable `useReport`, the SDK fetches flag settings by sending the context JSON in the body of a REPORT request instead, hiding that information from request logs.

</CalloutDescription>
</Callout>

Here's how to construct a basic context with a context kind of something other than "user":

<CodeSample>
<CSTab label="JavaScript SDK v3.0">

```js
const context = {
  kind: 'organization',
  key: 'org-key-123abc'
};
const client = LDClient.initialize('client-side-id-123abc', context);
```
</CSTab>
</CodeSample>

Here's how to construct a multi-context, which includes multiple context kinds:

<CodeSample>
<CSTab label="JavaScript SDK v3.0">

```js
const deviceContext = {
  kind: 'device',
  type: 'iPad',
  key: 'device-key-123abc'
}

const userContext = {
  kind: 'user',
  key: 'user-key-123abc',
  name: 'Sandy',
  role: 'doctor'
}

const multiContext = {
  kind: 'multi',
  user: userContext,
  device: deviceContext
}

const client = LDClient.initialize('client-side-id-123abc', multiContext)
```

</CSTab>
</CodeSample>

To learn how to configure private attributes in the JavaScript SDK, read [Private attributes](/sdk/features/private-attributes#javascript).

To learn how to configure anonymous contexts in the JavaScript SDK, read [Anonymous contexts and users](/sdk/features/anonymous#javascript).
</Details>

### Node.js (client-side)

<Details summary="Expand Node.js (client-side) code sample">

Here's an example of a context:

<CodeSample>
<CSTab label="Node.js SDK v3.0 (JavaScript)">

```js
const context = {
  kind: 'user',
  key: 'user-key-123abc',
  firstName: 'Sandy',
  lastName: 'Smith',
  email: 'sandy@example.com',
  groups: ['Google', 'Microsoft']
};
```

</CSTab>
<CSTab label="Node.js SDK v3.0 (TypeScript)">

```ts
import * as ld from 'launchdarkly-node-client-sdk';

const context: ld.LDContext = {
  kind: 'user',
  key: 'user-key-123abc',
  firstName: 'Sandy',
  lastName: 'Smith',
  email: 'sandy@example.com',
  groups: ['Google', 'Microsoft']
};
```

</CSTab>
<CSTab label="Node.js SDK v2.x (JavaScript)">

```js
const user = {
  key: 'user-key-123abc',
  firstName: 'Sandy',
  lastName: 'Smith',
  email: 'sandy@example.com',
  custom: {
    groups: ['Google', 'Microsoft']
  }
};
```

</CSTab>
<CSTab label="Node.js SDK v2.x (TypeScript)">

```ts
import * as ld from 'launchdarkly-node-client-sdk';

const user: ld.LDUser = {
  key: 'user-key-123abc',
  firstName: 'Sandy',
  lastName: 'Smith',
  email: 'sandy@example.com',
  custom: {
    groups: ['Google', 'Microsoft'],
  },
};
```

</CSTab>
</CodeSample>

The key should uniquely identify each context. You can use a primary key or a hash, as long as the same context always has the same key. We recommend using a hash if possible. In this example, the hash is `"user-key-123abc"`.

The `kind` and `name` attributes expect string values. Other attribute values can be booleans, numbers, strings, arrays, or JSON objects. 

If an attribute is a JSON object, then in your flag or segment targeting, you can use `/` as a delimiter to refer to specific object fields. For example, if you have an "address" attribute that includes several fields, then you could use <code>/address/city</code> in your targeting. To learn more, read [Targeting with flags](/home/flags/targeting).

<Callout intent="alert">
<CalloutTitle>Personally-identifying user keys</CalloutTitle>
<CalloutDescription>

By default, when the SDK requests feature flags from LaunchDarkly, it makes an HTTP GET request with the user properties encoded in the URL. If you do not want user keys or other properties to be in request URLs, enable the `useReport` option in your client configuration. The SDK sends user data in the body of an HTTP REPORT request instead.

</CalloutDescription>
</Callout>

Here's how to construct a basic context with a context kind of something other than "user":

<CodeSample>
<CSTab label="Node.js SDK v3.0 (JavaScript)">

```js
const context = {
  kind: 'organization',
  key: 'org-key-123abc'
};
const client = LaunchDarkly.initialize('client-side-id-123abc', context);
```
</CSTab>
</CodeSample>

Here's how to construct a multi-context, which includes multiple context kinds:

<CodeSample>
<CSTab label="Node.js SDK v3.0 (JavaScript)">

```js
const deviceContext = {
  kind: 'device',
  type: 'iPad',
  key: 'device-key-123abc'
}

const userContext = {
  kind: 'user',
  key: 'user-key-123abc',
  name: 'Sandy',
  role: 'doctor'
}

const multiContext = {
  kind: 'multi',
  user: userContext,
  device: deviceContext
}

const client = LaunchDarkly.initialize('client-side-id-123abc', multiContext)
```
</CSTab>
</CodeSample>

To learn how to configure private attributes in the Node.js (client-side) SDK, read [Private attributes](/sdk/features/private-attributes#nodejs-client-side).

To learn how to configure anonymous contexts in the Node.js (client-side) SDK, read [Anonymous contexts and users](/sdk/features/anonymous#nodejs-client-side).
</Details>

### React Native

<Details summary="Expand React Native code sample">

Here is a context configuration object:

<CodeSample>
<CSTab label="React Native SDK v7.0 (JavaScript)">

```js
// key and kind are the only required attributes

let context = {
  key: 'user-key-123abc',
  kind: 'user',
  firstName: 'Sandy',
  lastName: 'Smith',
  email: 'sandy@example.com',
  address: {
    street: '123 Main St',
    city: 'Springfield'
  }
};
```

</CSTab>
<CSTab label="React Native SDK, v6.x (JavaScript)">

```js
// in v6.x and earlier, the key is required
// the user object has a set of built-in attributes
// you can add additional attributes under 'custom'

let user = {
  key: '2fbfa269b78e24c8e967f482b89c939b',
  name: 'Sandy Smith',
  firstName: 'Sandy',
  lastName: 'Smith',
  email: 'sandy@example.net',
  anonymous: false,
  privateAttributeNames: ['name'],
  country: 'USA',
  avatar: 'avatar',
  ip: '192.0.2.1',
  secondary: '',
  custom: {'groups': 'users'}
};
```

</CSTab>
<CSTab label="React Native v7.0 (TypeScript)">

```ts
import LDClient, * as ld from 'launchdarkly-react-native-client-sdk';

// key and kind are the only required attributes

let context: ld.LDContext = {
  key: 'user-key-123abc',
  kind: 'user',
  firstName: 'Sandy',
  lastName: 'Smith',
  email: 'sandy@example.com',
  address: {
    street: '123 Main St',
    city: 'Springfield'
};
```

</CSTab>
<CSTab label="React Native v6.x (TypeScript)">

```ts
import LDClient, * as ld from 'launchdarkly-react-native-client-sdk';

// in v6.x and earlier, the key is required
// the user object has a set of built-in attributes
// you can add additional attributes under 'custom'

let user: ld.LDUser = {
  key: '2fbfa269b78e24c8e967f482b89c939b',
  name: 'Sandy Smith',
  firstName: 'Sandy',
  lastName: 'Smith',
  email: 'sandy@example.net',
  anonymous: false,
  privateAttributeNames: ['name'],
  country: 'USA',
  avatar: 'avatar',
  ip: '192.0.2.1',
  secondary: '',
  custom: {'groups': 'users'}
};
```

</CSTab>
</CodeSample>

The first attribute in the object is the `key`. In the React Native SDK, both `key` and `kind` are required. They are the only mandatory attributes. If you mark the context as anonymous, the SDK can generate the key for you. The combination of `key` and `kind` should uniquely identify each context. You can use any value for the key, such as a primary key or a hash, as long as the same context always has the same key. We recommend using a hash if possible. In this example, the value is `user-key-123abc`. 

Other attributes can be booleans, numbers, strings, arrays, or JSON objects. 

If an attribute is a JSON object, then in your flag or segment targeting, you can use `/` as a delimiter to refer to specific object fields. For example, if you have an "address" attribute that includes several fields, then you could use `/address/city` in your targeting. To learn more, read [Targeting with flags](/home/flags/targeting).

Here's how to construct a basic context with a context kind of something other than "user":

<CodeSample>
<CSTab label="React Native v7.0 (JavaScript)">

```js
const context = {
  kind: 'organization',
  key: 'org-key-123abc'
};

await ldClient.configure(config, context);
```

</CSTab>
</CodeSample>

Here's how to construct a multi-context, which includes multiple context kinds:

<CodeSample>
<CSTab label="React Native v7.0 (JavaScript)">

```js
const deviceContext = {
  kind: 'device',
  type: 'iPad',
  key: 'device-key-123abc'
}

const userContext = {
  kind: 'user',
  key: 'user-key-123abc',
  name: 'Sandy',
  role: 'doctor'
}

const multiContext = {
  kind: 'multi',
  user: userContext,
  device: deviceContext
}

await ldClient.configure(config, multiContext);
```

</CSTab>
</CodeSample>

To learn how to configure private attributes in the React Native SDK, read [Private attributes](/sdk/features/private-attributes#react-native).

To learn how to configure anonymous contexts in the React Native SDK, read [Anonymous contexts and users](/sdk/features/anonymous#react-native).
</Details>

### React Web

All context-related functionality provided by the [JavaScript SDK](#javascript) is also available in the React SDK.

Unlike the JavaScript SDK, the React SDK does not require a context object for initialization. If you do not specify one, the React SDK uses an anonymous context by default.

### Roku

<Details summary="Expand Roku code sample">

You can create a user object with:

<CodeSample>
<CSTab label="BrightScript">

```brightscript
user = LaunchDarklyUser("user-key-123abc")
```

</CSTab>
</CodeSample>

The key should uniquely identify each user. You can use a primary key or a hash, as long as the same user always has the same key. We recommend using a hash if possible. In this example, the hash is `"user-key-123abc"`.

User objects can be customized with:

<CodeSample>
<CSTab label="BrightScript">

```brightscript
user.setFirstName(String)

user.setLastName(String)

user.setEmail(String)

user.setName(String)

user.setAvatar(String)

user.setCustom(AssociativeArray)
```

</CSTab>
</CodeSample>

To learn how to configure private attributes in the Roku SDK, read [Private attributes](/sdk/features/private-attributes#roku).

To learn how to configure anonymous users in the Roku SDK, read [Anonymous contexts and users](/sdk/features/anonymous#roku).
</Details>

## Server-side SDKs

Here are the configuration options for context and user entities in server-side SDKs:

* [.NET (server-side)](#net-server-side)
* [Apex](#apex)
* [C/C++ (server-side)](#cc-server-side)
* [Erlang](#erlang)
* [Go](#go)
* [Haskell](#haskell)
* [Java](#java)
* [Lua](#lua)
* [Node.js (server-side)](#nodejs-server-side)
* [PHP](#php)
* [Python](#python)
* [Ruby](#ruby)
* [Rust](#rust)

### .NET (server-side)

<Details summary="Expand .NET (server-side) code sample">

In the .NET SDK, the [`Context`](https://launchdarkly.github.io/dotnet-server-sdk/api/LaunchDarkly.Sdk.Context.html) class has a `New` method for creating a simple context, with a context kind of "user" and with only a key. It has a `Builder` method for building a context with other properties.

Here's an example:

<CodeSample>
<CSTab label=".NET SDK v7.0 (C#)">

```csharp
LDContext context = Context.Builder("context-key-123abc")
    .Set("firstName", "Sandy")
    .Set("lastName", "Smith")
    .Set("email", "sandy@example.com")
    .Set("groups", LdValue.ArrayOf(LdValue.Of("Google"), LdValue.Of("Microsoft")))
    .Build();
```

</CSTab>
<CSTab label=".NET SDK v6.x (C#)">

```csharp
LDUser user = User.Builder("user-key-123abc")
    .FirstName("Sandy")
    .LastName("Smith")
    .Email("sandy@example.com")
    .Custom("groups", LdValue.ArrayOf(LdValue.Of("Google"), LdValue.Of("Microsoft")))
    .Build();
```

</CSTab>
</CodeSample>

The argument to `Builder` is the context's key. The key should uniquely identify each context. You can use a primary key or a hash, as long as the same context always has the same key. We recommend using a hash if possible. In this example, the hash is `context-key-123abc`.

<Callout intent="info">
<CalloutTitle>Interpreting custom attribute types</CalloutTitle>
<CalloutDescription>

The optional name and kind attributes, which you can set with `.Name()` and `.Kind()`, expect string values. If the kind attribute is not specified, it is assumed to be "user." Other attribute values can be booleans, numbers, strings, arrays, or JSON objects. The SDK uses the [`LdValue`](https://launchdarkly.github.io/dotnet-server-sdk/api/LaunchDarkly.Sdk.LdValue.html) type to represent arrays and objects. The .NET SDK is strongly-typed, so be aware of this distinction.

</CalloutDescription>
</Callout>

If an attribute is a JSON object, then in your flag or segment targeting, you can use `/` as a delimiter to refer to specific object fields. For example, if you have an "address" attribute that includes several fields, then you could use `/address/city` in your targeting. To learn more, read [Targeting with flags](/home/flags/targeting).

Here's how to construct a basic context with a context kind of something other than "user":

<CodeSample>
<CSTab label=".NET SDK v7.0 (C#)">

```csharp
var context2 = Context.New(ContextKind.Of("organization"), "org-key-123abc");
```
</CSTab>
</CodeSample>

Here's how to construct a multi-context, which includes multiple context kinds:

<CodeSample>
<CSTab label=".NET SDK v7.0 (C#)">

```csharp
var userContext = Context.New("context-key-123abc");

var deviceContext = Context.Builder("device-key-123abc")
    .Kind("device")
    .Build();

var multiContext = Context.NewMulti(userContext, deviceContext);

```
</CSTab>
</CodeSample>

To learn how to configure private attributes in the .NET (server-side) SDK, read [Private attributes](/sdk/features/private-attributes#net-server-side).

To learn how to configure anonymous contexts in the .NET (server-side) SDK, read [Anonymous contexts and users](/sdk/features/anonymous#net-server-side).
</Details>

### Apex

<Details summary="Expand Apex code sample">

Here's an example of a user:

<CodeSample>
<CSTab label="Java">

```java
LDUser user = new LDUser.Builder('user-key-123abc')
    .setFirstName('Sandy')
    .setLastName('Smith')
    .setEmail('sandy@example.com')
    .setCustom(new LDValueObject.Builder()
        .set('groups', new LDValueArray.Builder()
            .add(LDValue.of('Google'))
            .add(LDValue.of('Microsoft'))
            .build()
        )
        .build()
    )
    .build();
```

</CSTab>
</CodeSample>

The argument to `Builder` is the user's key. The key should uniquely identify each user. You can use a primary key or a hash, as long as the same user always has the same key. We recommend using a hash if possible. In this example, the hash is `"user-key-123abc"`.

To learn how to configure private attributes in the Apex SDK, read [Private attributes](/sdk/features/private-attributes#apex).

To learn how to configure anonymous users in the Apex SDK, read [Anonymous contexts and users](/sdk/features/anonymous#apex).
</Details>

### C/C++ (server-side)

<Details summary="Expand C/C++ (server-side) code sample">

Here's an example of a user:

<CodeSample>
<CSTab label="C/C++">

```c
struct LDUser *user = LDUserNew("user-key-123abc");
LDUserSetFirstName(user, "Sandy");
LDUserSetLastName(user, "Smith");
LDUserSetEmail(user, "sandy@example.com");

struct LDJSON *tmp;
struct LDJSON *custom = LDNewObject();
struct LDJSON *groups = LDNewArray();
tmp = LDNewText("Google");
LDArrayPush(groups, tmp);
tmp = LDNewText("Microsoft");
LDArrayPush(groups, tmp);
LDObjectSetKey(custom, "groups", groups);

LDUserSetCustom(user, custom);
```

</CSTab>
</CodeSample>

The argument to `LDUserNew` is the user's key. The key should uniquely identify each user. You can use a primary key or a hash, as long as the same user always has the same key. We recommend using a hash if possible. In this example, the hash is `"user-key-123abc"`.

<CodeSample>
<CSTab label="C/C++">

```c
LDUserFree(user);
```

</CSTab>
</CodeSample>

When you are done with an `LDUser` ensure that you free the structure.

To learn how to configure private attributes in the C/C++ (server-side) SDK, read [Private attributes](/sdk/features/private-attributes#cc-server-side).

To learn how to configure anonymous users in the C/C++ (server-side) SDK, read [Anonymous contexts and users](/sdk/features/anonymous#cc-server-side).
</Details>

### Erlang

<Details summary="Expand Erlang code sample">

Here's an example of a context:

<CodeSample>
<CSTab label="Erlang SDK v2.0">

```erlang
    Context = ldclient_context:set(<<"name">>, <<"Sandy Smith">>,
        ldclient_context:set(<<"email">>, <<"sandy@example.com">>,
        ldclient_context:set(<<"group">>, [<<"microsoft">>, <<"google">>],
        ldclient_context:new(<<"user-key">>, <<"user">>)))),
```

</CSTab>
<CSTab label="Erlang SDK v1.x">

```erlang
Map = #{
    key => <<"user-key-123abc">>,
    secondary => <<"secondary-123abc">>,
    ip => <<"198.51.100.0">>,
    country => <<"Canada">>,
    email => <<"sandy@example.com">>,
    first_name => <<"Sandy">>,
    last_name => <<"Smith">>,
    avatar => <<"avatar-123abc">>,
    name => <<"Sandy Smith">>,
    anonymous => false,
    <<"custom-key">> => <<"custom-value">>
},
User = ldclient_user:new_from_map(Map)
```

</CSTab>
</CodeSample>

The `key` property is the context's key. The key is the only mandatory context attribute. The combination of key and kind should uniquely identify each context. You can use a primary key or a hash, as long as the same context always has the same key. We recommend using a hash if possible. In this example, the hash is `"user-key-123abc"`.

You can set the kind, or, if you do not set it, LaunchDarkly assumes that the context kind is "user."

Here's how to construct a basic context with a context kind of something other than "user":

<CodeSample>
<CSTab label="Erlang SDK v2.0">

```erlang
Context = ldclient_context:new(<<"org-key-123abc">>, <<"organization">>)
%% Or as a map
Context = #{kind => <<"organization">>, key => <<"org-key-123abc">>}
```
</CSTab>
</CodeSample>

Here's how to construct a multi-context, which includes multiple context kinds:

<CodeSample>
<CSTab label="Erlang SDK v2.0">

```erlang
Context = ldclient_context:new_multi_from([
  %% Using `new/1` creates a context with a kind of <<"user">>.
  ldclient_context:new(<<"user-key-123abc">>),
  %% Using `new/2` creates a context of the specified kind (<<"device">>).
  ldclient_context:new(<<"device-key-123abc">>, <<"device">>)]). %% kind = device
```
</CSTab>
</CodeSample>

To learn how to configure private attributes in the Erlang SDK, read [Private attributes](/sdk/features/private-attributes#erlang).

To learn how to configure anonymous contexts in the Erlang SDK, read [Anonymous contexts and users](/sdk/features/anonymous#erlang).
</Details>

### Go

<Details summary="Expand Go code sample">

The Go SDK defines a `Context` struct and a `Builder`.

Here's an example:

<CodeSample>
<CSTab label="Go SDK v6.0">

```go
import (
    "github.com/launchdarkly/go-sdk-common/v3/ldcontext"
    "github.com/launchdarkly/go-sdk-common/v3/ldvalue"
)

// Context with only a key
// by default, the context kind is "user"
context1 := ldcontext.New("context-key-123abc")

// Context with a key plus other attributes
context2 := ldcontext.NewBuilder("context-key-456def").
    Kind("organization").
    Name("Global Health Services").
    SetString("email", "info@globalhealthexample.com").
    SetValue("address", ldvalue.ObjectBuild().
        SetString("street", "123 Main Street").
        SetString("city", "Springfield")).
    SetValue("groups", ldvalue.ArrayOf(
      ldvalue.String("Google"), ldvalue.String("Microsoft"))).
    Build()
```

</CSTab>
<CSTab label="Go SDK v5.x">

```go
import (
    "gopkg.in/launchdarkly/go-sdk-common.v2/lduser"
    "gopkg.in/launchdarkly/go-sdk-common.v2/ldvalue"  // for custom attributes read below
)

// User with only a key
user1 := lduser.NewUser("user-key-123abc")

// User with a key plus other attributes
user2 := lduser.NewUserBuilder("user-key-456def").
    FirstName("Sandy").
    LastName("Smith").
    Email("sandy@example.com").
    Custom("groups", ldvalue.ArrayOf(
        ldvalue.String("Google"), ldvalue.String("Microsoft"))).
    Build()
```

</CSTab>
</CodeSample>

The most common attribute is the context's key. The key is the only mandatory context attribute. The key should uniquely identify each context. You can use a primary key or a hash, as long as the same context always has the same key. We recommend using a hash if possible. In this case, the key and hash are `"context-key-123abc"` and `"context-key-456def"`.

To learn more about the available attributes, read [`Context`](https://pkg.go.dev/github.com/launchdarkly/go-sdk-common/v3@v3.0.0/ldcontext#Context) and [`Builder`](https://pkg.go.dev/github.com/launchdarkly/go-sdk-common/v3@v3.0.0/ldcontext#Builder).

<Callout intent="info">
<CalloutTitle>Interpreting attribute types</CalloutTitle>
<CalloutDescription>

The kind and name attributes expect string values. You can set the kind, or, if you do not set it, LaunchDarkly assumes that the context kind is "user." Other attribute values can be booleans, numbers, strings, arrays, or JSON objects. These types are all represented by the [`ldvalue.Value`](https://pkg.go.dev/github.com/launchdarkly/go-sdk-common/v3@v3.0.0/ldvalue#Value) type. The Go SDK is strongly-typed, so be aware of this distinction.

</CalloutDescription>
</Callout>

If an attribute is a JSON object, then in your flag or segment targeting, you can use `/` as a delimiter to refer to specific object fields. For example, if you have an "address" attribute that includes several fields, then you could use `/address/city` in your targeting. To learn more, read [Targeting with flags](/home/flags/targeting).

Here's how to construct a basic context with a context kind of something other than "user":

<CodeSample>
<CSTab label="Go SDK v6.0">

```go
context1 := ldcontext.NewWithKind("organization", "org-key-123abc")
```
</CSTab>
</CodeSample>

Here's how to construct a multi-context, which includes multiple context kinds:

<CodeSample>
<CSTab label="Go SDK v6.0">

```go
multiContext := ldcontext.NewMulti(
    ldcontext.New("user-key-123abc"),
    ldcontext.NewWithKind("device", "device-key-123abc")
)
```
</CSTab>
</CodeSample>

Each individual context within a multi-context can have the same attributes as a basic context. The only restriction is that each context has to have a different context `kind` from the others within the multi-context.

You can also use the context builder to create each of the individual contexts:

<CodeSample>
<CSTab label="Go SDK v6.0">

```go
multiContext := ldcontext.NewMulti(
    ldcontext.NewBuilder("user-key-123abc").Name("Sandy").Build(),
    ldcontext.NewBuilder("device-key-123abc").Kind("device").Name("iPad").Build(),
)
```
</CSTab>
</CodeSample>

To learn how to configure private attributes in the Go SDK, read [Private attributes](/sdk/features/private-attributes#go).

To learn how to configure anonymous contexts in the Go SDK, read [Anonymous contexts and users](/sdk/features/anonymous#go).
</Details>

### Haskell

<Details summary="Expand Haskell code sample">

Here's an example of a context:

<CodeSample>
<CSTab label="Haskell SDK v4.0">

```haskell
{-# LANGUAGE OverloadedStrings #-}

import LaunchDarkly.Server.Context

import Data.Function ((&))

-- Context with key and kind
context1 :: Context
context1 = makeContext "context-key-123abc" "user"

-- Context with a key plus other attributes
context2 :: Context
context2 = makeContext "context-key-456def" "organization"
    & withAttribute "name" "Global Health Services"
    & withAttribute "email" "info@globalhealthexample.com"
    & withAttribute "address" $ Object $ fromList [("street", "123 Main St"), ("city", "Springfield")]
```

</CSTab>
<CSTab label="Haskell SDK v3.x">

```haskell
{-# LANGUAGE OverloadedStrings #-}

import LaunchDarkly.Server.User

import Data.Function ((&))

-- User with only a key
user1 :: User
user1 = (makeUser "user-key-123abc")

user2 :: User
user2 = (makeUser "user-key-456def")
    & setFirstName "Sandy"
    & setLastName "Smith"
    & setEmail "sandy@example.com"
```

</CSTab>
</CodeSample>

The argument to `makeUser` is the context's key. The key is the only mandatory attribute. The combination of the key and kind should uniquely identify each context. You can use a primary key or a hash, as long as the same context always has the same key. We recommend using a hash if possible. In this example, the hash is `"user-key-123abc"`.

Here's how to construct a basic context with a context kind of something other than "user":

<CodeSample>
<CSTab label="Haskell SDK v4.0">

```haskell
makeContext "context-key-123abc" "organization"
```
</CSTab>
</CodeSample>

Here's how to construct a multi-context, which includes multiple context kinds:

<CodeSample>
<CSTab label="Haskell SDK v4.0">

```haskell
makeMultiContext [ makeContext "user-key-123abc" "user"
                 , makeContext "device-key-123abc" "device"
                 ]
```
</CSTab>
</CodeSample>

To learn how to configure private attributes in the Haskell SDK, read [Private attributes](/sdk/features/private-attributes#haskell).

To learn how to configure anonymous contexts in the Haskell SDK, read [Anonymous contexts and users](/sdk/features/anonymous#haskell).
</Details>

### Java

<Details summary="Expand Java code sample">

In the Java SDK, use a [builder pattern](http://en.wikipedia.org/wiki/Builder_pattern) to construct contexts.

Here's an example:

<CodeSample>
<CSTab label="Java SDK v6.0">

```java
LDContext context = LDContext.builder("context-key-123abc")
  .set("firstName", "Sandy")
  .set("lastName", "Smith")
  .set("email", "sandy@example.com")
  .set("groups",
    LDValue.buildArray().add("Google").add("Microsoft").build())
  .build();
```

</CSTab>
<CSTab label="Java SDK v5.x">

```java
LDUser user = new LDUser.Builder("user-key-123abc")
  .firstName("Sandy")
  .lastName("Smith")
  .email("sandy@example.com")
  .custom("groups",
    LDValue.buildArray().add("Google").add("Microsoft").build())
  .build()
```

</CSTab>
</CodeSample>

The argument to `Builder` is the context's key. The key should uniquely identify each context. You can use a primary key or a hash, as long as the same context always has the same key. We recommend using a hash if possible. In this example, the hash is `"context-key-123abc"`.

Our Javadoc for [ContextBuilder](https://javadoc.io/doc/com.launchdarkly/launchdarkly-java-server-sdk/latest/com/launchdarkly/sdk/ContextBuilder.html) shows you all the attributes that LaunchDarkly supports by default.

<Callout intent="info">
<CalloutTitle>Interpreting custom attribute types</CalloutTitle>
<CalloutDescription>

The optional name and kind attributes expect string values. If the "kind" attribute is not specified, it is assumed to be "user." Other attribute values can be booleans, numbers, strings, arrays, or objects. If you pass a value that looks like a number or a boolean, the SDK interprets it that way. The Java SDK is strongly-typed, so be aware of this distinction.

</CalloutDescription>
</Callout>

If an attribute is a JSON object, then in your flag or segment targeting, you can use `/` as a delimiter to refer to specific object fields. For example, if you have an "address" attribute that includes several fields, then you could use `/address/city` in your targeting. To learn more, read [Targeting with flags](/home/flags/targeting).

Here's how to construct a basic context with a context kind of something other than "user":

<CodeSample>
<CSTab label="Java SDK v6.0">

```java
LDContext context1 = LDContext.create(ContextKind.of("organization"), "org-key-123abc");
```
</CSTab>
</CodeSample>

Here's how to construct a multi-context, which includes multiple context kinds:

<CodeSample>
<CSTab label="Java SDK v6.0">

```java
LDContext multiContext = LDContext.createMulti(
    LDContext.create("user-key-123abc"),
    LDContext.create(ContextKind.of("device"), "device-key-123abc")
);
```
</CSTab>
</CodeSample>

To learn how to configure private attributes in the Java SDK, read [Private attributes](/sdk/features/private-attributes#java).

To learn how to configure anonymous contexts in the Java SDK, read [Anonymous contexts and users](/sdk/features/anonymous#java).
</Details>

### Lua

<Details summary="Expand Lua code sample">

Here's an example of a user:

<CodeSample>
<CSTab label="Lua">

```lua
local user = ld.makeUser({
    key       = "user-key-123abc",
    firstName = "Sandy",
    lastName  = "Smith",
    email     = "sandy@example.com",
    custom    = {
        groups = { "Google", "Microsoft" }
    }
})
```

</CSTab>
</CodeSample>

The argument to `ld.makeUser` is the user's key. The key should uniquely identify each user. You can use a primary key or a hash, as long as the same user always has the same key. We recommend using a hash if possible. In this example, the hash is `"user-key-123abc"`.

To learn more about configuration options, read the [API docs](https://launchdarkly.github.io/lua-server-sdk/index.html#makeUser).

To learn how to configure private attributes in the Lua SDK, read [Private attributes](/sdk/features/private-attributes#lua).

To learn how to configure anonymous users in the Lua SDK, read [Anonymous contexts and users](/sdk/features/anonymous#lua).
</Details>

### Node.js (server-side)

<Details summary="Expand Node.js (server-side) code sample">

In the Node.js SDK, contexts are JSON objects.

Here's an example:

<CodeSample>
<CSTab label="Node.js SDK v7.0 (JavaScript)">

```js
const context = {
  kind: 'user',
  key: 'user-key-123abc',
  firstName: 'Sandy',
  lastName: 'Smith',
  email: 'sandy@example.com',
  groups: ['Google', 'Microsoft'],
};
```

</CSTab>
<CSTab label="Node.js SDK v7.0 (TypeScript)">

```ts
import * as ld from 'launchdarkly-node-server-sdk';

const context: ld.LDContext = {
  kind: 'user',
  key: 'user-key-123abc',
  firstName: 'Sandy',
  lastName: 'Smith',
  email: 'sandy@example.com',
  groups: ['Google', 'Microsoft'],
};
```

</CSTab>
<CSTab label="Node.js v6.x and earlier (JavaScript)">

```js
const user = {
  key: 'user-key-123abc',
  firstName: 'Sandy',
  lastName: 'Smith',
  email: 'sandy@example.com',
  custom: {
    groups: ['Google', 'Microsoft']
  }
};
```

</CSTab>
<CSTab label="Node.js v6.x and earlier (TypeScript)">

```ts
import * as ld from 'launchdarkly-node-server-sdk';

const user: ld.LDUser
  key: 'user-key-123abc',
  firstName: 'Sandy',
  lastName: 'Smith',
  email: 'sandy@example.com',
  custom: {
    groups: ['Google', 'Microsoft'],
  },
};
```

</CSTab>
</CodeSample>

The `key` property is the context key. The key should uniquely identify each context. You can use a primary key or a hash, as long as the same context always has the same key. We recommend using a hash if possible. In this example, the hash is `"user-key-123abc"`.

<Callout intent="info">
<CalloutTitle>Interpreting custom attribute types</CalloutTitle>
<CalloutDescription>

The optional `name` and `kind` attributes expect string values. If the `kind` attribute is not specified, it is assumed to be "user." Other attribute values can be booleans, numbers, strings, arrays, or JSON objects.

</CalloutDescription>
</Callout>

If an attribute is a JSON object, then in your flag or segment targeting, you can use `/` as a delimiter to refer to specific object fields. For example, if you have an "address" attribute that includes several fields, then you could use `/address/city` in your targeting. To learn more, read [Targeting with flags](/home/flags/targeting).

Here's how to construct a basic context with a context kind of something other than "user":

<CodeSample>
<CSTab label="Node.js SDK v7.0 (JavaScript)">

```js
const context = {
   kind: 'device',
   key: 'device-key-123abc'
}
```

</CSTab>
</CodeSample>

Here's how to construct a multi-context, which includes multiple context kinds:

<CodeSample>
<CSTab label="Node.js SDK v7.0 (JavaScript)">

```js
const context = {
  kind: 'multi',
  user: { key: 'user-key-123abc' },
  device: { key: 'device-key-123abc' }
}
```

</CSTab>
<CSTab label="Node.js SDK v7.0 (TypeScript)">

```ts
const context: ld.LDContext = {
  kind: 'multi',
  user: { key: 'user-key-123abc' },
  device: { key: 'device-key-123abc' }
}
```

</CSTab>
</CodeSample>

To learn how to configure private attributes in the Node.js (server-side) SDK, read [Private attributes](/sdk/features/private-attributes#nodejs-server-side).

To learn how to configure anonymous contexts in the Node.js (server-side) SDK, read [Anonymous contexts and users](/sdk/features/anonymous#nodejs-server-side).
</Details>

### PHP

<Details summary="Expand PHP code sample">

In the PHP SDK, use a [builder pattern](http://en.wikipedia.org/wiki/Builder_pattern) to construct contexts.

Here's an example:

<CodeSample>
<CSTab label="PHP SDK v5.0">

```php
$context = LDContext::builder("context-key-123abc")
    ->set("firstName", "Sandy")
    ->set("lastName", "Smith")
    ->set("email", "sandy@example.com")
    ->set("groups", ["Google", "Microsoft"])
    ->build();
```

</CSTab>
<CSTab label="PHP SDK v4.x">

```php
$user = (new LDUserBuilder("user-key-123abc"))
    ->firstName("Sandy")
    ->lastName("Smith")
    ->email("sandy@example.com")
    ->custom(["groups" => ["Google", "Microsoft"]])
    ->build();
```

</CSTab>
</CodeSample>

The first argument to [`LDContextBuilder`](http://launchdarkly.github.io/php-server-sdk/classes/LaunchDarkly-LDContextBuilder.html) is the context's key. The key should uniquely identify each context. You can use a primary key or a hash, as long as the same context always has the same key. We recommend using a hash if possible. In this example, the hash is `"context-key-123abc"`.

<Callout intent="info">
<CalloutTitle>Interpreting custom attribute types</CalloutTitle>
<CalloutDescription>

The kind and name attributes expect string values. Other attribute values can be booleans, numbers, strings, or arrays. If you enter a custom value on the **Contexts** list that looks like a number or a boolean, the SDK interprets it that way. The PHP SDK is strongly-typed, so be aware of this distinction.

</CalloutDescription>
</Callout>

Here's how to construct a basic context with a context kind of something other than "user":

<CodeSample>
<CSTab label="PHP SDK v5.0">

```php
$context = LDContext::create("context-key-123abc", "organization");
```

</CSTab>
</CodeSample>

Here's how to construct a multi-context, which includes multiple context kinds:

<CodeSample>
<CSTab label="PHP SDK v5.0">

```php
$deviceContext = LDContext::create("device-key", "device");
$orgContext = LDContext::create("org-key", "org");
$multiContext = LDContext::createMulti($deviceContext, $orgContext);
```

</CSTab>
</CodeSample>

To learn how to configure private attributes in the PHP SDK, read [Private attributes](/sdk/features/private-attributes#php).

To learn how to configure anonymous contexts in the PHP SDK, read [Anonymous contexts and users](/sdk/features/anonymous#php).
</Details>

### Python

<Details summary="Expand Python code sample">

In version 8.0 and higher of the Python SDK, the [`Context`](https://launchdarkly-python-sdk.readthedocs.io/en/latest/api-main.html#ldclient.Context) class has a `create` method for creating a simple context, with a context kind of "user" and with only a key. It has a `builder` method for building a context with other properties.

Here's an example:

<CodeSample>
<CSTab label="Python SDK v8.0">

```python
context = Context.builder("context-key-123abc") \
    .set("firstName", "Sandy") \
    .set("lastName", "Smith") \
    .set("email", "sandy@example.com") \
    .set("groups", ["Google", "Microsoft"]) \
    .build()
```

</CSTab>
<CSTab label="Python SDK v7.x">

```python
# In version 7.x of the SDK, the type for a user is simply a dictionary.

user = {
    "key": "user-key-123abc",
    "firstName": "Sandy",
    "lastName": "Smith",
    "email": "sandy@example.com",
    "custom": {
      "groups": ["Google", "Microsoft"]
    }
}
```

</CSTab>
</CodeSample>

The argument to `Context.builder` is the context's key. The key should uniquely identify each context. You can use a primary key or a hash, as long as the same context always has the same key. We recommend using a hash if possible. In this example, the hash is `"context-key-123abc"`.

<Callout intent="info">
<CalloutTitle>Interpreting custom attribute types</CalloutTitle>
<CalloutDescription>

The optional name and kind attributes expect string values. If the "kind" attribute is not specified, it is assumed to be "user." Other attribute values can be booleans, numbers, strings, arrays, or objects.

</CalloutDescription>
</Callout>

If an attribute is a JSON object, then in your flag or segment targeting, you can use `/` as a delimiter to refer to specific object fields. For example, if you have an "address" attribute that includes several fields, then you could use `/address/city` in your targeting. To learn more, read [Targeting with flags](/home/flags/targeting).

Here's how to construct a basic context with a context kind of something other than "user":

<CodeSample>
<CSTab label="Python SDK v8.0">

```python
context1 = Context.create("org-key-123abc", "organization")
```
</CSTab>
</CodeSample>

Here's how to construct a multi-context, which includes multiple context kinds:

<CodeSample>
<CSTab label="Python SDK v8.0">

```python
multi_context = Context.create_multi(
    Context.create("user-key-123abc"),
    Context.create("device-key-123abc", "device")
)
```
</CSTab>
</CodeSample>

To learn how to configure private attributes in the Python SDK, read [Private attributes](/sdk/features/private-attributes#python).

To learn how to configure anonymous contexts in the Python SDK, read [Anonymous contexts and users](/sdk/features/anonymous#python).
</Details>

### Ruby

<Details summary="Expand Ruby code sample">

In the Ruby SDK, contexts are instances of `LaunchDarkly::LDContext`. Legacy users can continue to be provided as simple hashes.

Here's an example:

<CodeSample>
<CSTab label="Ruby SDK v7.0">

```ruby
context = LaunchDarkly::LDContext.create({
    key: "user-key-123abc",
    kind: "user",
    firstName: "Sandy",
    lastName: "Smith",
    email: "sandy@example.com",
    groups: ["Google", "Microsoft"]
})
```

</CSTab>
<CSTab label="Ruby SDK v6.x">

```ruby
user = {
    key: "user-key-123abc",
    firstName: "Sandy",
    lastName: "Smith",
    email: "sandy@example.com",
    custom: {
      groups: ["Google", "Microsoft"]
    }
}
```

</CSTab>
</CodeSample>

The `key` property is the context's key. The key should uniquely identify each context. You can use a primary key, an email address, or a hash string, as long as the same context always has the same key. We recommend using a hash string if possible. In this example, the hash is `"user-key-123abc"`.

<Callout intent="info">
<CalloutTitle>Context attribute keys must be symbols</CalloutTitle>
<CalloutDescription>

All context attribute keys, for both built-in and custom attributes, must be symbols and not strings.

</CalloutDescription>
</Callout>

<Callout intent="info">
<CalloutTitle>Interpreting custom attribute types</CalloutTitle>
<CalloutDescription>

The optional name and kind attributes expect string values. If the "kind" attribute is not specified, it is assumed to be "user" and the hash is assumed to be in the legacy user format. Other attribute values can be booleans, numbers, strings, arrays, or objects. If you enter a custom value on the **Contexts** list that looks like a number or a boolean, the SDK interprets it that way.

</CalloutDescription>
</Callout>

If an attribute is a JSON object, then in your flag or segment targeting, you can use `/` as a delimiter to refer to specific object fields. For example, if you have an "address" attribute that includes several fields, then you could use `/address/city` in your targeting. To learn more, read [Targeting with flags](/home/flags/targeting).

Here's how to construct a basic context with a context kind of something other than "user":

<CodeSample>
<CSTab label="Ruby SDK v7.0">

```ruby
context = LaunchDarkly::LDContext.with_key("context-key-123abc", "organization")
```
</CSTab>
</CodeSample>

Here's how to construct a multi-context, which includes multiple context kinds:

<CodeSample>
<CSTab label="Ruby SDK v7.0">

```ruby
multi_context = LaunchDarkly::LDContext.create_multi([
    LaunchDarkly::LDContext.with_key("user-key-123abc"),
    LaunchDarkly::LDContext.with_key("device-key-123abc", "device"),
])
```
</CSTab>
</CodeSample>

To learn how to configure private attributes in the Ruby SDK, read [Private attributes](/sdk/features/private-attributes#ruby).

To learn how to configure anonymous contexts in the Ruby SDK, read [Anonymous contexts and users](/sdk/features/anonymous#ruby).
</Details>

### Rust

<Details summary="Expand Rust code sample">

The Rust SDK defines a [`Context`](https://docs.rs/launchdarkly-server-sdk/latest/launchdarkly_server_sdk/struct.Context.html) struct and a [`ContextBuilder`](https://docs.rs/launchdarkly-server-sdk/latest/launchdarkly_server_sdk/struct.ContextBuilder.html).

Here's an example:

<CodeSample>
<CSTab label="Rust SDK v1">

```rust
// Context with only a key
let context = ContextBuilder::new("context-key-123abc").build()?;

// Context with a key plus other attributes
let custom = hashmap! {
    "groups".into() => vec!["Google", "Microsoft"].into(),
};
let context = ContextBuilder::new("context-key-123abc")
    .set_value("first_name", "Sandy".into())
    .set_value("last_name", "Smith".into())
    .set_value("email", "sandy@example.com".into())
    .set_value("Google", "groups".into())
    .set_value("Microsoft", "groups".into())
    .build();
```

</CSTab>
<CSTab label="Rust SDK beta">

```rust
// User with only a key
let user = UserBuilder::new("user-key-123abc").build()?;

// User with a key plus other attributes
let custom = hashmap! {
    "groups".into() => vec!["Google", "Microsoft"].into(),
};
let mut builder = User::with_key("user-key-123abc");
builder.first_name("Sandy");
builder.last_name("Smith");
builder.email("sandy@example.com");
builder.custom(custom);
let user2 = builder.build();
```

</CSTab>
</CodeSample>

The most common attribute is the context's key. The key is the only mandatory context attribute. The combination of the key and kind should also uniquely identify each context. For the context key, you can use a primary key, a hash string, or some other value, as long as the same context always has the same key. We recommend using a hash string if possible. In this example, the hash is `"context-key-123abc"`.

You can set the kind, or, if you do not set it, LaunchDarkly assumes that the context kind is "user."

To learn more about the available attributes, read [`Context`](https://docs.rs/launchdarkly-server-sdk/latest/launchdarkly_server_sdk/struct.Context.html) and [`ContextBuilder`](https://docs.rs/launchdarkly-server-sdk/latest/launchdarkly_server_sdk/struct.ContextBuilder.html).

<Callout intent="info">
<CalloutTitle>Interpreting custom attribute types</CalloutTitle>
<CalloutDescription>

The optional name and kind attributes, which you can set with `.name()` and `.kind()`, expect string values. Other attribute values can be any JSON type, including booleans, numbers, strings, arrays, or objects. These types are all represented by the [`AttributeValue`](https://docs.rs/launchdarkly-server-sdk/latest/launchdarkly_server_sdk/enum.AttributeValue.html) type. The Rust SDK is strongly-typed, so be aware of this distinction.

</CalloutDescription>
</Callout>

If an attribute is a JSON object, then in your flag or segment targeting, you can use `/` as a delimiter to refer to specific object fields. For example, if you have an "address" attribute that includes several fields, then you could use `/address/city` in your targeting. To learn more, read [Targeting with flags](/home/flags/targeting).

Here's how to construct a basic context with a context kind of something other than "user":

<CodeSample>
<CSTab label="Rust SDK v1">

```rust
let context = ContextBuilder::new("context-key-123abc")
    .kind("organization")
    .build()?;
```
</CSTab>
</CodeSample>

Here's how to construct a multi-context, which includes multiple context kinds:

<CodeSample>
<CSTab label="Rust SDK v1">

```rust
let user_context = ContextBuilder::new("user-key-123abc").build()?;
client.identify(user_context.clone());

let device_context = ContextBuilder::new("device-key-123abc").kind("device").build()?;
client.identify(device_context.clone());

let multi_context = MultiContextBuilder::new()
.add_context(user_context)
.add_context(device_context)
.build()?;

client.identify(multi_context);
```
</CSTab>
</CodeSample>

To learn how to configure private attributes in the Rust SDK, read [Private attributes](/sdk/features/private-attributes#rust).

To learn how to configure anonymous contexts in the Rust SDK, read [Anonymous contexts and users](/sdk/features/anonymous#rust).
</Details>
